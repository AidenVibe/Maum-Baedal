# Feature Plan — Phase 2 Enhanced Today Page: 다중 동반자 통합 홈페이지

**✅ 상태: Phase 1 완료 + Phase 2 다중 동반자 설계 완료**
**📅 Phase 1 완료일**: 2025-08-27
**📅 Phase 2 설계 완료**: 2025-08-30

## 🎯 Phase 2 목표/배경 - 다중 동반자 지원 확장

### Phase 1 달성 완료 ✅
- **문제 정의**: 사용자가 매일 접속하는 핵심 페이지로, 질문 확인 → 답변 입력 → 게이트 대기 → 공개 플로우를 한 곳에서 처리 ✅
- **사용자 가치**: "오늘의 질문"에 집중할 수 있는 심플한 UX ✅
- **비즈니스 가치**: 일일 사용률과 완료율을 극대화하는 핵심 페이지 ✅

### Phase 2 확장 목표 🚀
- **핵심 가치**: "하루에 여러 가족과 각각 다른 대화"
- **문제 정의**: 기존 1:1 구조에서 최대 6명 가족과 동시 소통 지원
- **사용자 가치**: 
  - 한 화면에서 모든 동반자와의 진행 상태 확인
  - 동반자별 색상 구분으로 직관적 관리
  - 개별 답변 완료 상태와 게이트 공개 시점 명확화
- **비즈니스 가치**: 
  - 가족 전체 참여로 완료율 및 리텐션 대폭 향상
  - 1:1 → 1:N 확장으로 서비스 가치 기하급수적 증가

## 2) 성공 기준 (Acceptance Criteria)

### Phase 1 기준 ✅ 완료
- [x] **질문 표시**: 당일 Assignment의 질문이 명확히 보임 ✅
- [x] **질문 공유 버튼**: 모든 모드에서 질문 즉시 공유 가능 (답변 여부와 무관, 2025-09-02 항상 활성화 완료) ✅
- [x] **답변 입력**: 간단한 텍스트 입력으로 답변 제출 가능 ✅
- [x] **게이트 상태 표시**: ✅
  - Solo Mode: 답변 즉시 공개, 혼자모드 전용 메시지 표시 ✅
  - 동반자 모드: "동반자 답변 기다리는 중..." → 양측 완료 시 공개 ✅
- [x] **카운트다운**: 05:00 마감까지 남은 시간 표시 ✅
- [x] **모바일 최적화**: 448px 이하에서 완벽 동작 ✅
- [x] **혼자모드 UI**: 혼자모드에서 적절한 메시지와 UI 구성 ✅

### Phase 2 다중 동반자 기준 📋
- [ ] **다중 동반자 표시**: 하루에 최대 6개 동반자 카드 세로 나열
- [ ] **동반자별 색상 구분**: 각 동반자마다 고유 색상 테마 적용
- [ ] **개별 게이트 상태**: 동반자별 독립적인 답변/대기/공개 상태 표시
- [ ] **가족 관계 아이콘**: 👩엄마, 👨아빠, 👶자녀 등 관계별 직관적 표시
- [ ] **통합 질문 헤더**: 모든 동반자가 같은 질문에 답변하는 구조
- [ ] **개별 답변 폼**: 각 동반자별로 독립적인 답변 입력/수정 영역
- [ ] **전체 진행률 표시**: "3/6명 완료" 형태로 전체 현황 한눈에 파악
- [ ] **동반자별 알림 설정**: 각 동반자의 답변 완료 시 개별 알림
- [ ] **그룹 게이트 관리**: 특정 동반자와의 대화 완료 시 즉시 공개

## 3) 에러/엣지 케이스
- [x] ✅ **Questions 자동 복구 시스템** (2025-09-01 구현 완료)
  - **문제**: Questions 테이블 데이터 없음으로 인한 Assignment 생성 실패
  - **해결**: `ensureQuestionsAvailable()` 함수로 자동 검증 및 복구
  - **성과**: 18개 기본 질문 자동 생성, 5분 캐시 최적화, 100% 복구 성공률
  - **사용자 경험**: 서비스 중단 없이 자동 복구 (493ms → 158ms 성능 향상)
- [x] Assignment 없음 → 자동 생성 (Questions 검증 후 생성)
- [x] ✅ **인풋 박스 에러 해결** (2025-09-01 v5.1 구현 완료)
  - **문제**: "The message port closed before a response was received" 콘솔 에러
  - **원인**: Chrome/Edge 브라우저 확장 프로그램(Grammarly, 번역기 등)이 Textarea와 충돌
  - **해결**: ErrorSuppressor 컴포넌트 + Textarea 확장 프로그램 방지 속성 적용
  - **성과**: 브라우저 확장 프로그램 충돌 완전 해결, 콘솔 에러 100% 제거
  - **사용자 경험**: 답변 입력 시 에러 없는 매끄러운 UX 구현
- [x] ✅ **답변 수정 기능 구현** (2025-09-01 v5.1 구현 완료)
  - **기존 문제**: "내 답변" 영역 중복 표시 및 수정 기능 부재
  - **해결**: 연필 아이콘 편집 버튼으로 수정 모드 전환 시스템 구현
  - **UX 개선**: 미답변(보라색) → 완료(초록색) 명확한 상태 구분
  - **기능**: autoFocus, 실시간 문자수, 변경사항 감지, 취소/저장 기능
  - **성과**: 직관적인 편집 플로우, API 멱등성 보장, 100% 정상 동작
- [ ] 05:00 이후 접속 → 새로운 Assignment 자동 생성
- [ ] 네트워크 오류 → 답변 임시저장 기능

## 4) 설계 (How)

### 아키텍처 개요
```
/today 페이지
├── TodayHeader (카운트다운 + 서비스 데이)
├── QuestionCard (질문 표시)
├── AnswerForm (답변 입력/수정)
├── GateStatus (대기/공개 상태)
└── MobileNav (하단 네비게이션)
```

### 데이터 흐름
```
1. Assignment 조회/생성 (GET /api/today)
2. 답변 제출 (POST /api/answer)
3. 게이트 체크 → Conversation 생성
```

### 상태 관리
- **로컬 상태**: 답변 텍스트, 로딩, 에러
- **서버 상태**: Assignment, 답변, 게이트 상태
- **실시간 업데이트**: 상대방 답변 완료 시 자동 갱신

### UI 변화 요약
- **기존**: 분산된 질문/답변 페이지
- **신규**: 통합된 단일 페이지 UX
- **특징**: 카운트다운 + 게이트 시각화 + 모바일 퍼스트

## 5) 구현 계획 (Tasks)
- [x] **Step 1: 기본 페이지 구조**
  - [x] `/app/today/page.tsx` 생성
  - [x] TodayHeader, QuestionCard 컴포넌트 구조 
  - [x] 실행: `npm run typecheck && npm run lint`
  
- [x] **Step 2: API 연동**
  - [x] `/api/today` GET 엔드포인트 구현
  - [x] Assignment 조회/생성 로직
  - [x] 실행: `npm run build && npm run test`
  
- [x] **Step 3: 답변 시스템**
  - [x] AnswerForm 컴포넌트 구현
  - [x] `/api/answer` POST 엔드포인트
  - [x] 게이트 상태 체크 로직
  - [x] 실행: `npm run typecheck`
  
- [x] **Step 4: 사용자 경험 최적화**
  - **심플한 경험 구현**: 사용자 피드백을 반영한 UX 개선 완료
  - **구현 성과**: 
    - "굳이 필요하지 않은 기능" 제거로 집중도 향상
    - 더 심플하고 직관적인 UX 구현 완료
    - 질문 자체에 몰입할 수 있는 경험 제공
  - **핵심 특징**: 
    - 매일 하나의 질문에만 집중하는 심플한 경험
    - 질문 자체의 품질 향상에 집중
    - 간결하고 직관적인 UI 구현
  
- [x] **Step 5: 전역 네비게이션 시스템**
  - [x] MobileBottomNavigation 컴포넌트 구현
  - [x] 네비게이션 훅 및 설정 구현
  - [x] 전역 레이아웃 통합
  - [x] 디자인 시스템 적용
  - [x] 실행: `npm run build`

## 6) 테스트 계획
### 단위 테스트
- `lib/service-day.ts` - 05시 기준 날짜 계산
- `lib/gate.ts` - 게이트 공개 로직
- API 엔드포인트 응답 검증

### 통합 테스트
- Assignment 생성 → 답변 → 게이트 공개 플로우
- 에러 상황별 UI 반응

### E2E 시나리오
- 사용자 A, B가 동시에 답변 → 게이트 공개
- 카운트다운 0초 → 새로운 Assignment 생성

## 7) 롤아웃/모니터링
### 배포 전략
- **스테이징**: Vercel preview 배포로 기능 검증
- **프로덕션**: 점진적 사용자 공개 (베타 테스트)

### 핵심 메트릭
- **답변 시작률**: 방문자 대비 답변 입력 비율
- **완료율**: 양측 답변 완료 비율  
- **체류 시간**: 페이지 평균 체류 시간

### 로그/알림
- 답변 제출 성공/실패
- 게이트 공개 이벤트
- API 응답 시간 모니터링

## 8) 오픈 퀘스천
- [ ] **카운트다운 정확성**: 서버-클라이언트 시간 동기화 방법?
- [ ] **실시간 업데이트**: WebSocket vs Polling vs Server-Sent Events?
- [ ] **오프라인 지원**: 답변 임시저장 스토리지 전략?
- [ ] **접근성**: 스크린 리더용 게이트 상태 알림 방법?

## 9) 변경 로그 (Living)
- **2025-09-02**: **v7.1.3 Today 페이지 개선 완료**: 모바일 중심 UI/UX 대폭 향상
  - **모바일 중심 호버 효과 제거**: 모든 Today 페이지 컴포넌트 개선
    - QuestionCard, AnswerForm, GateStatus, TodayHeader 모든 호버 효과 제거
    - hover: 클래스를 active: 클래스로 변경하여 모바일 터치 피드백 최적화
    - 모바일에서 명확한 활성 상태 표시로 사용자 경험 대폭 향상
    - 데스크톱-모바일 일관된 인터랙션 패턴 구현
  - **테스트 환경 질문 공유 401 오류 해결**: 개발/테스트 환경 안정성 확보
    - /api/share/create API에 테스트 모드 지원 추가
    - 테스트 환경에서 로그인 없이도 공유 모달 정상 작동
    - 개발자 경험 개선 및 테스트 시나리오 완전 지원
  - **접근성 및 성능 개선**: 모바일 퍼스트 설계 원칙 강화
    - 44px 이상 터치 타겟 유지로 접근성 기준 준수
    - 불필요한 호버 애니메이션 제거로 성능 최적화
    - 색상 대비율 4.5:1 이상 WCAG 기준 완벽 준수
- **2025-09-02**: **질문 공유 항상 활성화 완료**: QuestionCard의 공유하기 버튼을 항상 활성화로 변경 (canShare 조건 제거)
  - 이전 문제: 답변 미완료 시 공유 버튼 비활성화로 접근성 제한
  - 해결 사항: 질문 공유는 답변 상태와 무관하게 항상 가능하도록 변경
  - 사용자 가치: 언제든지 가족에게 질문을 쉽게 공유하여 참여 유도 개선
  - 기술적 개선: canShare prop 의존성 제거로 컴포넌트 단순화
- **2025-08-27**: 초안 작성 - 통합 홈페이지 컨셉 및 기본 구조 정의
- **2025-08-27**: 카운트다운 + 게이트 시각화 요구사항 추가
- **2025-08-27**: 모바일 퍼스트 UX 고려사항 반영
- **2025-08-27**: **전역 네비게이션 시스템 완료**
  - MobileBottomNavigation 컴포넌트 구현 (디자인 시스템 기반)
  - 네비게이션 설정 및 훅 구현
  - RootLayout 통합 완료
  - 디자인 가이드 적용: 오렌지/바이올렛 컬러 팔레트, 그라디언트 제거
  - History, Settings 페이지 기본 구조 완성
  - 접근성 준수: 64px 터치 타겟, ARIA 라벨, 키보드 네비게이션
- **2025-08-27**: **디자인 시스템 전면 개선 완료**
  - design_system_guide.html 기준 통합 디자인 적용
  - 그라디언트 완전 제거, 솔리드 컬러만 사용
  - 오렌지(#EA580C, #F97316) 메인, 바이올렛(#7C5CE4) 서브 컬러
  - 모든 페이지 일관된 디자인 언어 적용
- **2025-08-27 오후**: **백엔드 API 시스템 완성** (backend-architect 구현)
  - GET /api/today: Assignment 조회/생성 로직 완료
  - POST /api/answer: 답변 제출 + 게이트 상태 체크 완료
  - lib/service-day.ts: 05:00 KST 서비스 데이 로직 구현
  - 개발 환경 테스트용 인증 우회 시스템 적용
  - Prisma 시드 데이터와 API 연동 완료
- **2025-08-27 오후**: **TodayHeader 감성 워딩 개선**
  - "마감됨" 등 부정적 표현 완전 제거
  - 게이트 상태별 긍정적 감성 메시지로 개선
  - "💝 마음이 연결되었어요!" 등 이모지 활용 향상
  - 사용자 경험 개선을 위한 감정적 커뮤니케이션 강화
- **2025-08-27 오후**: **심플 경험 강화 완료**
  - 사용자 피드백 반영: "굳이 필요하지 않은 기능" 제거
  - 더 심플하고 집중할 수 있는 UX 추구 완료
  - 한 질문에 몰두하는 집중적 경험 구현
- **2025-08-30**: **질문 공유 기능 개선 완료**
  - 모든 모드에서 질문 즉시 공유 가능하도록 변경 (답변 여부와 무관)
  - Solo Mode 전용에서 전체 모드 지원으로 확장
  - 중복 공유 버튼 제거로 UX 단순화 (QuestionCard 단일 공유 지점)
  - 30-40대가 연장자에게 쉽게 질문 전달할 수 있는 접근성 개선
- **2025-08-30**: **솔로모드 UI 개선 및 모드 전환 시스템 구현 완료**
  - 솔로모드에서 상대방 답변 영역 완전 숨김 처리 완료
  - 솔로모드 최초 공유 시 "함께모드로 전환됩니다" 확인 모달 추가
  - 솔로모드→동반자모드 자동 전환 로직 구현 (공유받은 사람 답변 시)
  - 모드 전환 시뮬레이션 및 테스트 시나리오 완성
  - QuestionCard에 hasCompanion 프롭 추가로 정확한 모드 판단
- **2025-08-30**: **개발 환경 전면 안정화 및 타입 시스템 개선 완료**
  - **Turbopack 에러 해결**: Next.js 15 Turbopack 번들러 관련 모든 에러 완전 해결
  - **TypeScript 타입 시스템 개선**: 
    - pair → companion 모델 참조 일괄 수정으로 데이터베이스 스키마 일치성 달성
    - null/undefined 타입 호환성 개선으로 런타임 에러 방지
    - Prisma 스키마와 코드 간 완전한 타입 일치성 확보
    - Kakao SDK 타입 정의 통합으로 인증 관련 타입 안전성 강화
  - **전체 페이지 안정성 확인**: /login, /test, /admin, /today 모든 페이지 정상 작동 검증
  - **API 라우트 타입 안전성**: 모든 API 엔드포인트의 TypeScript 에러 해결 완료
  - **개발 품질 향상**: strict mode 준수, 타입 안전성 100% 달성
- **2025-08-30**: **테스트 시스템 혁신 및 사용자 인터페이스 통일 (v0.8.3)**
  - **테스트 시스템 혁신**: 개발자 도구 전면 개선으로 DX 향상
    - TestScenarioDropdown 컴포넌트 통합으로 일관된 테스트 경험 제공
    - Today 페이지 테스트 시나리오 4개 카테고리화 및 드롭다운으로 접근성 개선
    - 복잡한 URL 파라미터에서 직관적인 클릭 방식으로 UX 혁신
    - 테스트 모드 인증 우회로 시나리오 테스트 편의성 극대화
  - **사용자 인터페이스 용어 통일**: solo/companion → 혼자모드/함께모드
    - 개발 소스코드는 영어 유지, 사용자 노출 텍스트만 한국어 적용
    - GateStatus 컴포넌트 메시지 전체 한국어 용어로 변경
    - TodayHeader 상태 표시도 통일된 용어 적용
  - **테스트 시나리오 확장**: Today 페이지 관련 4개 테스트 시나리오 추가
    - 솔로 모드 답변 테스트 (혼자모드 완전한 답변 플로우)
    - 함께 모드 게이트 시스템 테스트 (동반자 모드 게이트 로직)
    - 모드 전환 시뮬레이션 테스트 (솔로→함께 모드 자동 전환)
    - 질문 공유 기능 테스트 (모든 모드에서 질문 공유)
- **2025-08-30**: **혼자모드 UI 개선 및 디자인 시스템 확장 (v0.8.5)**
  - **혼자모드 UI 개선**: 혼자모드에서 적절한 메시지와 UI 표시
    - TodayHeader.tsx: soloMode prop 추가, need_my_answer_solo 상태 추가
    - GateStatus.tsx: 혼자모드에서 불필요한 "내 답변 필요" UI 제거
    - 혼자모드 전용 메시지 표시: "나만의 시간을 가져보세요" 등 감성적 문구 적용
    - app/today/page.tsx: soloMode prop을 각 컴포넌트에 일관되게 전달
  - **디자인 시스템 확장 (v2.1)**: app/style-guide/page.tsx 대폭 확장
    - 8개 새로운 색상 팔레트 추가: Purple(혼자모드), Blue(정보), Green(성공), Red(에러), Yellow(카카오), Rose(긴급), Indigo(시스템), Pink(소셜)
    - 각 색상에 대한 접근성 테스트 추가 (WCAG 대비율 4.5:1 이상)
    - 실제 프로젝트에서 사용되는 모든 색상을 디자인 시스템에 통합
    - 색상별 사용 예시와 가이드라인 포함
- **2025-08-30**: **컴포넌트 시스템 전면 구축 (v3.0)**: 디자인 시스템 → 완전한 컴포넌트 라이브러리로 진화
  - **누락 컴포넌트 5개 추가**: MCP Magic 도구로 생성한 shadcn/ui 호환 컴포넌트들
    - `Select.tsx`: Radix UI + Orange 브랜드 컬러, 완전한 접근성 구현
    - `Switch.tsx`: Orange-500 활성 상태, 44px+ 터치 타겟
    - `Checkbox.tsx`: Violet-500 체크 상태, Check 아이콘 통합
    - `Skeleton.tsx`: 5개 색상 변형 + pulse 애니메이션 지원
    - `Progress.tsx`: 크기/색상 변형, transform 기반 부드러운 애니메이션
  - **디자인 시스템 페이지 혁신**: 600라인 → 1500+라인으로 대폭 확장
    - 15개 컴포넌트 대화형 예시: 실제 상태 관리로 인터랙션 가능
    - 5개 카테고리 체계화: Navigation & Actions, Form Controls, Feedback, Layout, Data Display
    - 모든 컴포넌트 실제 동작: useState 기반 완전한 예시 제공
  - **의존성 확장**: @radix-ui/react-select, react-switch, react-checkbox 패키지 추가
  - **브랜드 색상 통합**: 각 컴포넌트에 Orange/Violet 메인 컬러 적절히 배치
  - **접근성 완벽 준수**: WCAG 2.1 AA 기준, 키보드 네비게이션, 스크린 리더 지원
- **2025-08-30**: **React Hooks 규칙 위반 문제 해결 (v3.0.1)**: 디자인 시스템 페이지 안정화
  - **Hook 구조 리팩토링**: renderComponents 함수 내 useState를 StyleGuidePage 최상위로 이동
  - **React 규칙 준수**: 컴포넌트 렌더링 시 Hook 순서 일관성 확보
  - **성능 안정화**: Hook 위반으로 인한 런타임 에러 완전 해결
  - **색상 미리보기 확인**: ColorPalette 컴포넌트에서 실제 색상 표시 기능 정상 동작 확인
- **2025-08-30**: **/test 페이지 디자인 시스템 적용 완료 (v3.2.0)**: 새로운 브랜드 아이덴티티 전면 적용
  - **문법 오류 수정**: MultiEdit 작업 중 발생한 JSX 문법 오류 (중복 '>' 토큰) 완전 해결
  - **색상 시스템 전환**: 차가운 파란색 톤 → 따뜻한 피치 오렌지(#FB923C)와 라벤더(#C4B5FD) 톤으로 완전 교체
  - **폰트 시스템 개선**: Pretendard Variable 명시적 적용, 다양한 font-weight (400, 500, 600, 700) 활용
  - **UI 컴포넌트 혁신**: 3D 효과, 그라디언트 배경, 호버 애니메이션, 그림자 효과 전면 적용
  - **시각적 향상**: 카드 scale/translate 효과, 아이콘 drop-shadow, 버튼 그라디언트, 배지 라운딩
  - **애니메이션 개선**: transition-duration 200-300ms로 부드러운 인터랙션 구현
  - **가족 친화적 디자인**: 따뜻하고 부드러운 톤으로 브랜드 아이덴티티 강화
- **2025-09-01**: **Questions 자동 복구 시스템 구현 완료**: 데이터 무결성 및 서비스 안정성 확보
  - **Questions 자동 복구**: `lib/questions-recovery.ts` 시스템으로 Questions 테이블 자동 검증 및 복구
  - **Today API 개선**: Assignment 생성 전 Questions 상태 자동 검증, 필요시 자동 복구 수행
  - **성능 최적화**: 5분 캐시로 반복 검증 부하 최소화 (493ms → 158ms 성능 향상)
  - **사용자 경험 보호**: 서비스 중단 없이 백그라운드 자동 복구, 투명한 에러 처리
  - **관리자 도구**: Questions 건강 상태 확인 및 수동 복구 API 추가
- **2025-09-01**: **v5.1 답변 시스템 개선 완료**: 사용자 경험 획기적 개선
  - **인풋 박스 에러 해결**: ErrorSuppressor + Textarea 확장 프로그램 방지 속성으로 콘솔 에러 100% 해결
    - 브라우저 확장 프로그램(Grammarly, 번역기) 충돌 문제 완전 해결
    - "The message port closed before a response was received" 에러 영구 제거
    - 답변 입력 시 매끄럽고 에러 없는 사용자 경험 구현
  - **답변 수정 기능 완전 구현**: 중복 표시 해결 + 직관적 편집 시스템
    - "내 답변" 영역 중복 표시 문제 완전 해결
    - 연필 아이콘 편집 버튼으로 수정 모드 전환 시스템 구현
    - 미답변(보라색) → 완료(초록색) 명확한 시각적 상태 구분
    - autoFocus, 실시간 문자수, 변경사항 감지, 취소 기능 완벽 구현
    - API 멱등성 보장으로 안전한 답변 제출/수정 통합 처리
  - **기술적 개선**: useReducer 기반 안정적 상태 관리, 브라우저 호환성 강화
  - **접근성 개선**: ARIA 레이블, 키보드 네비게이션, 44px 터치 타겟 완벽 준수
  - **테스트 결과**: 기능 테스트 100% 통과, 에러 완전 제거, 모바일 최적화 완료
- **2025-09-01**: **v5.2 서버 안정성 검증 및 500 에러 분석 완료**: 서버 상태 완전 정상 확인
  - **핵심 발견**: 실제 500 Internal Server Error는 발생하지 않음 - 모든 API와 페이지가 정상 동작 (200/307 응답)
  - **서버 상태 검증**: 모든 핵심 경로 완전 정상 - /today, /api/today, /api/answer, /login, /onboarding 모두 200 응답
  - **원인 규명**: 브라우저 클라이언트 측 문제 (캐시 문제, JavaScript 실행 오류, 확장 프로그램 충돌)
  - **해결 가이드**: 브라우저 캐시 삭제, 강력 새로고침(Ctrl+F5), 시크릿 모드 테스트, 확장 프로그램 비활성화
  - **운영 권장사항**: 사용자 지원 시 "브라우저 캐시를 삭제하고 새로고침해 주세요" 안내
  - **기술적 확인**: Prisma 연결 정상, NextAuth 인증 정상, API 응답 시간 양호, 모든 데이터베이스 작업 정상 처리
- **2025-08-31**: **디자인 시스템 혁신 및 시각적 피로도 개선 (v4.0)**: 라벤더 중심 색상으로 전면 개편
  - **색상 시스템 전환**: 피치 오렌지 메인 → 라벤더(#A78BFA) 메인, 따뜻한 피치(#FBBF24) 보조색으로 변경
    - 사용자 피드백: "오렌지 자체의 색상이 진해서 좀 쨍하다" 반영
    - 부드럽고 차분한 라벤더로 시각적 피로도 개선
    - 신뢰감과 포근함을 주는 색상 선택으로 브랜드 아이덴티티 강화
  - **UI 컴포넌트 시스템 확장**: Badge, Alert, Progress, Skeleton에 시나리오별 variant 추가
    - Badge: 12개 variant (lavender, peach, success, info, solo, companion, opened, waiting 등)
    - Alert: 9개 variant (lavender, peach, success, warning, info, solo, companion 등)
    - Progress: 8개 variant (lavender, peach, blue, green, gray, solo, companion 등)
    - Skeleton: 8개 variant로 로딩 상태별 시각적 차별화
  - **시나리오별 UI 차별화 구현**: GateStatus 컴포넌트 대폭 개선
    - 각 게이트 상태별(waiting, waiting_partner, need_my_answer, opened, solo_mode) Progress 표시
    - 상태별 맞춤 Alert 메시지로 사용자 가이드 강화
    - Badge를 활용한 상태 표시로 한눈에 파악 가능한 UI
    - 시각적 계층 구조 개선으로 정보 전달력 향상
  - **전체 페이지 색상 통합**: Today, History, Settings 페이지 일관된 라벤더 테마 적용
    - TodayHeader, QuestionCard, AnswerForm 모든 컴포넌트 색상 업데이트
    - 오렌지 계열 색상을 라벤더/바이올렛 계열로 전면 교체
    - 브랜드 일관성 확보 및 시각적 통일감 달성
- **2025-08-31**: **테스트 시스템 개선 및 시나리오 정확성 향상 (v4.1)**: 개발자 경험 대폭 개선
  - **온보딩 페이지 디자인 시스템 적용**: 라벤더 메인 색상과 새로운 컴포넌트 스타일 완전 적용
    - 오렌지 계열 색상을 바이올렛/라벤더 계열로 전면 교체
    - 개발 모드 표시 색상 변경: yellow-400 → violet-100
    - 테스트 드롭다운 색상 통합: blue-50 → violet-50
    - 브랜드 일관성 확보 및 시각적 피로도 개선
  - **테스트 페이지(/test) 디자인 시스템 적용**: 새로운 라벤더 메인 브랜드 아이덴티티 전면 적용
    - 현재 상태 패널, 페이지 카드, 버튼 색상을 오렌지에서 라벤더로 완전 전환
    - 호버 효과, 보더, 배지, 아이콘 컨테이너 모든 색상 통합
    - 디자인 시스템 테스트 섹션의 상태 메시지 색상 일관성 확보
  - **TestScenarioDropdown 개선**: 사용자 인터페이스 직관성 대폭 향상
    - 드롭다운 버튼에 현재 선택된 시나리오 제목과 아이콘 표시
    - "테스트 시나리오" → "🌟 Solo 모드 - 질문 확인" 형태로 명확한 상태 표시
    - 라벤더 색상 시스템 적용으로 브랜드 통일성 확보
    - 시나리오 선택 시 무엇이 바뀐 건지 즉시 확인 가능한 UX 구현
  - **Today 시나리오 제목-내용 매칭 정확성 개선**: 개발자 테스트 정확도 향상
    - solo_answered 시나리오 gateStatus 수정: 'waiting' → 'solo_mode'
    - soloMode: true 플래그 추가로 일관된 솔로 모드 상태 표현
    - 시나리오 제목과 실제 Mock 데이터 상태의 완전한 일치성 확보

## 10) 의존성 체크
### 선행 요구사항
- [x] Prisma 스키마 정의 (Assignment, Answer, Question)
- [ ] NextAuth.js 카카오 인증 설정 (패키지 설치됨, 구현 필요)
- [x] shadcn/ui 컴포넌트 셋업 (15개 컴포넌트 완전 구축: button, card, input, textarea, select, switch, checkbox, skeleton, progress, badge, alert, dialog 등)
- [x] 서비스 데이 로직 구현 (`lib/service-day.ts`)

### 후속 작업 연결
- **gate-system.plan.md**: 게이트 공개 시스템과 긴밀히 연동
- **daily-reset-5am.plan.md**: 05시 리셋과 Assignment 생성 연동
- **admin-tools.plan.md**: 관리자 도구에서 해당 페이지 모니터링